<!DOCTYPE html>
<html lang="ar">
<head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz App</title>


    <style>
    * { box-sizing: border-box; }
    body {
    font-family: 'Segoe UI', sans-serif;
    background-color: #f4f4f4;
    margin: 0;
    padding: 0;
    }
    .quiz-container {
    width: 600px;
    background-color: white;
    margin: 50px auto;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    .quiz-info {
    display: flex;
    justify-content: space-between;
    margin-bottom: 20px;
    }
    .question {
    font-size: 20px;
    margin-bottom: 15px;
    }
    .answers-area button {
    display: block;
    width: 100%;
    margin: 10px 0;
    padding: 10px;
    background-color: #eee;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: 0.3s;
    }
    .answers-area button.selected {
    background-color: #2196F3;
    color: white;
    }
    .buttons {
    display: flex;
    justify-content: space-between;
    gap: 10px;
    margin: 20px auto;
    }
    .buttons button {
    padding: 10px 20px;
    background-color: black;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    flex: 1;
    }
    .bullets {
    margin-top: 20px;
    text-align: center;
    }
    .spans span {
    display: inline-block;
    width: 10px;
    height: 10px;
    background-color: #ddd;
    margin: 0 5px;
    border-radius: 50%;
    }
    .spans span.on {
    background-color: gray;
    }
    .results {
    font-size: 20px;
    text-align: center;
    }
    .timer {
    font-size: 18px;
    text-align: center;
    margin-top: 10px;
    color: #e91e63;
    }
    .retry-btn {
    margin-top: 20px;
    display: inline-block;
    padding: 10px 20px;
    background-color: #f44336;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    }
    </style>



</head>
<body>
    <div class="quiz-container">
    <div class="quiz-info">
        <div class="category">HTML quiz </div>
        <div class="count">question numbers <span class="count-span"></span></div>
    </div>
    <div class="question"></div>
    <div class="answers-area"></div>
    <div class="buttons">
        <button class="prev-button">&lt; Previous</button>
        <button class="submit-button">Next &gt;</button>
    </div>
    <div class="bullets">
        <div class="spans"></div>
    </div>
    <div class="timer">Remaining time: <span id="time">60</span> seconds</div>
    <div class="results"></div>
    </div>



<script>
    let questions = [];
    let currentIndex = 0;
    let rightAnswers = 0;
    let userAnswers = [];
    let timer;
    let timeLimit = 60; // seconds per question

    const countSpan = document.querySelector(".count-span");
    const bulletsContainer = document.querySelector(".spans");
    const questionArea = document.querySelector(".question");
    const answersArea = document.querySelector(".answers-area");
    const submitButton = document.querySelector(".submit-button");
    const prevButton = document.querySelector(".prev-button");
    const resultsContainer = document.querySelector(".results");
    const timerDisplay = document.getElementById("time");

    function createBullets(num) {
        countSpan.textContent = num;
        bulletsContainer.innerHTML = "";
        for (let i = 0; i < num; i++) {
        let span = document.createElement("span");
        if (i === 0) span.className = "on";
        bulletsContainer.appendChild(span);
        }
    }

    function showQuestion(q) {
        questionArea.textContent = q.title;
        answersArea.innerHTML = "";
        for (let key in q.answers) {
        let btn = document.createElement("button");
        btn.textContent = q.answers[key];
        btn.onclick = function () {
            document.querySelectorAll('.answers-area button').forEach(b => b.classList.remove("selected"));
            this.classList.add("selected");
            userAnswers[currentIndex] = this.textContent;
        };
        if (userAnswers[currentIndex] === q.answers[key]) {
        btn.classList.add("selected");
        }
        answersArea.appendChild(btn);
        }
        resetTimer();
    }

    function checkAnswer() {
        let selected = userAnswers[currentIndex];
        return selected && selected === questions[currentIndex].right_answer;
    }

    function handleBullets() {
        let spans = document.querySelectorAll(".spans span");
        spans.forEach((span, index) => {
        span.classList.remove("on");
        if (index === currentIndex) {
            span.classList.add("on");
        }
        });
    }

    function showResults(total, correct) {
    questionArea.remove();
    answersArea.remove();
    document.querySelector(".buttons").remove();
    bulletsContainer.remove();
    document.querySelector(".timer").remove();
        if (correct === total) {
        resultsContainer.innerHTML = `<span style="color: green;">Perfect</span>, ${correct} of ${total}`;
        } else if (correct > total / 2) {
        resultsContainer.innerHTML = `<span style="color: orange;">Good</span>, ${correct} of ${total}`;
        } else {
        resultsContainer.innerHTML = `<span style="color: red;">Fail</span>, ${correct} of ${total}<br><button class='retry-btn' onclick='restartQuiz()'>Try Again</button>`;
        }
    }

    function nextQuestion() {
        if (checkAnswer()) {
        if (!userAnswers[currentIndex + 1]) rightAnswers++;
        }
        currentIndex++;
        if (currentIndex < questions.length) {
        showQuestion(questions[currentIndex]);
        handleBullets();
        } else {
        let finalCorrect = 0;
        questions.forEach((q, i) => {
            if (userAnswers[i] === q.right_answer) finalCorrect++;
        });
        showResults(questions.length, finalCorrect);
            }
    }

    function resetTimer() {
        clearInterval(timer);
        let remaining = timeLimit;
        timerDisplay.textContent = remaining;
        timer = setInterval(() => {
        remaining--;
        timerDisplay.textContent = remaining;
        if (remaining === 0) {
            clearInterval(timer);
            nextQuestion();
        }
        }, 1000);
    }

// try again
    function restartQuiz() {
        location.reload();
    }


    submitButton.onclick = function () {
        clearInterval(timer);
        nextQuestion();
    }


    prevButton.onclick = function () {
        if (currentIndex > 0) {
        currentIndex--;
        showQuestion(questions[currentIndex]);
        handleBullets();
            }
    }



    fetch("questions.json")
        .then(res => res.json())
        .then(data => {
        questions = data;
        createBullets(questions.length);
        showQuestion(questions[currentIndex]);
        });



</script>



</body>
</html>